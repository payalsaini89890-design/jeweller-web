<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Platinum Suite | Rare & Eternal | The Atelier</title>
    <meta
      name="description"
      content="The Platinum Suite at The Jewellery Atelier. Discover the rarest precious metal, crafted for understated brilliance and eternal strength."
    />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="The Platinum Suite | Rare & Eternal | The Atelier"
    />
    <meta
      property="og:description"
      content=" ‡§Ö‡§Ç‡§°‡§∞‡§∏‡•ç‡§ü‡•à‡§° ‡§¨‡•ç‡§∞‡§ø‡§≤‡§ø‡§è‡§Ç‡§∏ (Understated brilliance) defined in rare Pt 950 platinum."
    />

    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/collections.css" />
    <link rel="stylesheet" href="../css/modal.css" />
    <link rel="stylesheet" href="../css/gallery.css" />
    <link rel="stylesheet" href="../css/filters.css" />
    <link rel="stylesheet" href="../css/mobile-menu.css" />
    <link rel="stylesheet" href="../css/dossier.css" />
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.34/dist/lenis.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- Configuration and Supabase -->
    <script src="../js/env.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-client.js"></script>
    <script src="../js/ticker.js" defer></script>
  </head>

  <body>
    <!-- Mobile Menu Overlay -->
    <div
      class="mobile-menu-overlay"
      id="mobileMenuOverlay"
      onclick="toggleMobileMenu()"
    ></div>
    <div class="mobile-menu" id="mobileMenu">
      <div class="mobile-menu-close" onclick="toggleMobileMenu()">‚úï</div>
      <nav class="mobile-menu-nav">
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="gold.html">Gold Collection</a></li>
          <li>
            <a href="platinum.html" class="active">Platinum Collection</a>
          </li>
          <li><a href="../ai.html">AI Concierge</a></li>
          <li><a href="../contact.html">Visit Store</a></li>
          <li><a href="../heritage.html">The Heritage</a></li>
          <li><a href="../wishlist.html">Wishlist</a></li>
        </ul>
      </nav>
    </div>

    <header id="header">
      <a href="../index.html" class="logo">THE ATELIER</a>
      <nav>
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="gold.html">Gold Collection</a></li>
          <li>
            <a href="platinum.html" class="active" style="color: var(--crimson)"
              >Platinum Collection</a
            >
          </li>
          <li><a href="../ai.html">AI Concierge</a></li>
          <li><a href="../contact.html">Visit Store</a></li>
          <li><a href="../heritage.html">The Heritage</a></li>
          <li>
            <a
              href="../wishlist.html"
              title="Wishlist"
              style="position: relative; font-size: 1.2rem"
              >‚ô• <span id="wishlist-count" style="display: none">0</span></a
            >
          </li>
        </ul>
        <div class="mobile-menu-toggle" onclick="toggleMobileMenu()">MENU</div>
      </nav>
    </header>

    <main class="collection-container">
      <!-- 1. HERO SECTION -->
      <section class="hero">
        <div>
          <h1>The Platinum<br />Suite</h1>
          <p>
            Discover the rarest of all precious metals. Crafted for those who
            seek understated brilliance and eternal strength. Naturally white,
            effectively eternal.
          </p>

          <div class="ctaRow">
            <a class="btn-hero" href="#collections">
              Explore Platinum
              <span>‚Üí</span>
            </a>
          </div>
        </div>

        <aside class="heroCard">
          <div class="heroMedia">
            <div
              class="frame"
              style="
                background:
                  radial-gradient(
                    1200px 400px at 70% 10%,
                    rgba(255, 255, 255, 0.18),
                    transparent 45%
                  ),
                  linear-gradient(145deg, #2e2e2e, #1a1a1a);
              "
            >
              <span>Featured: Platinum Love Bands</span>
            </div>
          </div>
        </aside>
      </section>

      <!-- Trust Pills Row (All 4 aligned) -->
      <div class="trust-pills-row">
        <div class="pill">
          <span class="dotIcon" style="background: #a9a9a9"></span>
          <div>
            <b>Pt 950 Pure</b>
            <small>95% pure platinum for unmatched durability.</small>
          </div>
        </div>
        <div class="pill">
          <span class="dotIcon" style="background: #a9a9a9"></span>
          <div>
            <b>Eternal White</b>
            <small>Naturally white, never fades or tarnishes.</small>
          </div>
        </div>
        <div class="pill">
          <span class="dotIcon" style="background: #a9a9a9"></span>
          <div>
            <b>Rare & Precious</b>
            <small>30x rarer than gold.</small>
          </div>
        </div>
        <div class="pill">
          <span class="dotIcon" style="background: #a9a9a9"></span>
          <div>
            <b>Hypoallergenic</b>
            <small>Perfect for sensitive skin.</small>
          </div>
        </div>
      </div>

      <!-- 2. GRID SECTION -->
      <div id="collections" class="grid-header">
        <div>
          <h2>Explore Platinum</h2>
          <p style="color: var(--text-muted); margin-top: 5px">
            Subtle, sophisticated, and strong.
          </p>
        </div>
      </div>

      <div
        id="filterContainer"
        style="margin-top: 30px; margin-bottom: 40px; text-align: center"
      ></div>

      <div class="jewelry-grid" id="platinum-grid">
        <div
          class="loading-state"
          style="grid-column: 1 / -1; text-align: center; padding: 40px"
        >
          Loading Collection...
        </div>
      </div>

      <div class="view-more-container">
        <button
          id="viewMoreBtn"
          class="btn-view-more"
          onclick="loadMoreItems()"
        >
          View More Jewellery
        </button>
      </div>

      <!-- 3. TRUST STRIP -->
      <section class="trustStrip" id="trust">
        <div class="trustItem">
          <span
            class="badge"
            style="color: #666; background: rgba(0, 0, 0, 0.05)"
            >PGI</span
          >
          <div>
            <b>PGI Certified</b>
            <small>Official Platinum Guild International Member.</small>
          </div>
        </div>
        <div class="trustItem">
          <span
            class="badge"
            style="color: #666; background: rgba(0, 0, 0, 0.05)"
            >Pt</span
          >
          <div>
            <b>Pt 950</b>
            <small>The standard of purity.</small>
          </div>
        </div>
        <div class="trustItem">
          <span
            class="badge"
            style="color: #666; background: rgba(0, 0, 0, 0.05)"
            >‚àû</span
          >
          <div>
            <b>Lifetime Care</b>
            <small>Cleaning & maintenance support.</small>
          </div>
        </div>
        <div class="trustItem">
          <span
            class="badge"
            style="color: #666; background: rgba(0, 0, 0, 0.05)"
            >üîí</span
          >
          <div>
            <b>Secure</b>
            <small>Protected checkout & safe delivery.</small>
          </div>
        </div>
      </section>

      <!-- 4. TESTIMONIAL -->
      <section class="testimonial" style="background: #333">
        <div class="quote">
          <h3 style="color: #eee">Modern Sophistication</h3>
          <p style="color: #ccc">
            ‚ÄúI love the weight and feel of platinum. It feels substantial, real,
            and forever. The Atelier‚Äôs designs are perfectly understated.‚Äù
          </p>
          <div class="name" style="color: #fff">
            <span
              style="
                width: 10px;
                height: 10px;
                border-radius: 50%;
                background: white;
                margin-right: 8px;
              "
            ></span>
            Vikram S.
          </div>
        </div>
        <div class="model" style="background: #222">
          <div class="portrait" style="color: #666">Platinum World</div>
        </div>
      </section>
    </main>

    <div id="dossier-root"></div>

    <footer>
      <div class="footer-grid">
        <div class="footer-brand">
          <span class="logo">THE JEWELLERY ATELIER</span>
          <p>Your destination for the rarest metals on earth.</p>
        </div>
        <div class="footer-col">
          <h4>Platinum Suite</h4>
          <p>Men's Platinum</p>
          <p>Engagement Rings</p>
          <p>Platinum Evara</p>
        </div>
        <div class="footer-col">
          <h4>Assurance</h4>
          <p>PGI Certification</p>
          <p>Custom Engraving</p>
          <p>Visit Atelier</p>
        </div>
        <div class="footer-col">
          <h4>The Store</h4>
          <p>123 Royale Avenue, Diamond District,<br />Flagship City, 000001</p>
          <p>+91 00000 00000</p>
        </div>
      </div>
      <div class="copyright">
        ¬© 2026 The Jewellery Atelier. Platinum Guild International Member.
      </div>
    </footer>

    <script src="../js/app.js"></script>
    <script src="../js/modal.js"></script>
    <script src="../js/gallery.js"></script>
    <script src="../js/filters.js"></script>
    <script src="../js/wishlist.js"></script>
    <script src="../js/mobile-menu.js"></script>
    <script src="../js/dossier.js"></script>
    <script>
      let allItems = [];
      let filteredItems = [];
      let visibleCount = 9;
      let filterManager = null;

      async function loadJewellery() {
        const grid = document.getElementById("platinum-grid");

        // 1. Show Skeletons while loading
        showSkeletons();

        if (!window.env?.TEXT_SUPABASE_URL) {
          grid.innerHTML = `<p style="text-align: center; width: 100%;">Config Missing</p>`;
          return;
        }

        try {
          const { data, error } = await window.supabaseText
            .from("jewellery")
            .select("*")
            .eq("category", "platinum")
            .eq("is_active", true);

          if (error) throw error;
          allItems = data || [];

          if (!filterManager) {
            filterManager = new ProductFilter("platinum", (filters) => {
              visibleCount = 9;
              renderGrid(filters);
            });
          }

          // Artificial delay for premium transition
          setTimeout(() => renderGrid(), 600);
        } catch (err) {
          console.error("Error loading:", err);
          grid.innerHTML =
            '<p style="text-align: center; width: 100%;">Failed to load collection.</p>';
        }
      }

      function showSkeletons() {
        const grid = document.getElementById("platinum-grid");
        grid.innerHTML = "";
        for (let i = 0; i < 6; i++) {
          grid.innerHTML += `
                    <div class="product-card skeleton" style="cursor: default;">
                        <div class="image-container skeleton"></div>
                        <div class="card-body">
                            <div class="skeleton" style="height: 20px; width: 70%; margin-bottom: 10px; border-radius: 4px;"></div>
                            <div class="skeleton" style="height: 15px; width: 40%; margin-bottom: 20px; border-radius: 4px;"></div>
                            <div class="skeleton" style="height: 35px; width: 100%; border-radius: 8px;"></div>
                        </div>
                    </div>
                `;
        }
      }

      function renderGrid(filters = null) {
        const grid = document.getElementById("platinum-grid");
        const viewMoreBtn = document.getElementById("viewMoreBtn");

        // 1. Apply Filters
        filteredItems = [...allItems];
        if (filters) {
          if (filters.search)
            filteredItems = filteredItems.filter((it) =>
              it.name.toLowerCase().includes(filters.search),
            );
          if (filters.jewelryType.length > 0)
            filteredItems = filteredItems.filter((it) =>
              filters.jewelryType.includes(it.jewelry_type),
            );
          if (filters.purity.length > 0)
            filteredItems = filteredItems.filter((it) =>
              filters.purity.includes(it.gold_purity),
            );
          filteredItems = filteredItems.filter((it) => {
            const priceNum =
              parseInt(String(it.price).replace(/[^0-9]/g, "")) || 0;
            return (
              priceNum <= filters.priceRange || filters.priceRange === 500000
            );
          });
        }

        // 2. Pagination
        const visibleItems = filteredItems.slice(0, visibleCount);

        // 3. Render
        grid.innerHTML = "";
        if (visibleItems.length === 0) {
          grid.innerHTML = `
            <div class="empty-state">
              <div class="empty-state-icon">‚úß</div>
              <h3>No Masterpieces Found</h3>
              <p>Adjust your filters or search terms to reveal our other exquisite pieces.</p>
              <button class="btn-red" style="padding: 12px 30px;" onclick="location.reload()">Reset Filters</button>
            </div>
          `;
          if (viewMoreBtn) viewMoreBtn.style.display = "none";
          return;
        }

        visibleItems.forEach((item) => {
          const isLiked = wishlistManager?.isInWishlist(item.id);
          const card = document.createElement("div");
          card.className = "product-card";
          card.onclick = () => openProductDetail(item.id);

          card.innerHTML = `
                    <div class="image-container">
                        <img src="${item.image_url}" alt="${item.name}" loading="lazy">
                        <span>${item.jewelry_type || "Jewellery"}</span>
                        <button class="wishlist-icon ${isLiked ? "wishlisted" : ""}" 
                                onclick="event.stopPropagation(); toggleWishlist('${item.id}', this)">
                            ${isLiked ? "‚ô•" : "‚ô°"}
                        </button>
                    </div>
                    <div class="card-body">
                        <h3>${item.name}</h3>
                        <p>${item.price}</p>
                        <button class="btn-view-details">View Details</button>
                    </div>
                `;
          grid.appendChild(card);
        });

        // 4. View More State
        if (viewMoreBtn) {
          viewMoreBtn.style.display =
            filteredItems.length > visibleCount ? "inline-block" : "none";
        }

        _lastFilters = filters;
      }

      let _lastFilters = null;
      function loadMoreItems() {
        visibleCount += 9;
        renderGrid(_lastFilters);
      }

      function toggleWishlist(id, btn) {
        if (window.wishlistManager) {
          window.wishlistManager.toggle(id);
          if (btn.classList.contains("wishlisted")) {
            btn.classList.remove("wishlisted");
            btn.innerText = "‚ô°";
          } else {
            btn.classList.add("wishlisted");
            btn.innerText = "‚ô•";
          }
        }
      }

      function toggleMobileMenu() {
        const menu = document.getElementById("mobileMenu");
        const overlay = document.getElementById("mobileMenuOverlay");
        menu.classList.toggle("active");
        overlay.classList.toggle("active");
        document.body.style.overflow = menu.classList.contains("active")
          ? "hidden"
          : "";
      }

      async function handleEnquiry() {
        const item = allItems.find((it) => it.id === dossier.productId);
        openEnquiryModal(item);
      }

      window.addEventListener("DOMContentLoaded", loadJewellery);
    </script>
  </body>
</html>
